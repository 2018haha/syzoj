<% this.title = '首页'; %>
<% include header %>
<div class="padding">
  <div class="ui three column grid">
    <div class="eleven wide column">
      <h4 class="ui top attached block header">公告</h4>
      <div class="ui bottom attached segment">
        <table class="ui very basic table">
          <thead>
            <tr>
              <th>标题</th>
              <th>时间</th>
            </tr>
          </thead>
          <tbody>
            <% for (let item of notices) { %>
                <tr>
                    <td><a href="<%= item.url %>"><%= item.title %></a></td>
                    <td><%= item.date %></td>
                </tr>
            <% } %>
          </tbody>
        </table>
      </div>
      <h4 class="ui top attached block header">排名</h4>
      <div class="ui bottom attached segment">
        <table class="ui very basic center aligned table">
          <thead>
            <tr>
              <th>#</th>
              <th>昵称</th>
              <th>个性签名</th>
            </tr>
          </thead>
          <tbody>
            <%
            let i = 0;
            for (let user of ranklist) {
              ++i;
            %>
                <tr>
                    <td><%= i %></td>
                    <td><a href="<%= syzoj.utils.makeUrl(['user', user.id]) %>"><%= user.username %></a><% if (user.nameplate) { %><%- user.nameplate %><% } %></td>
                    <td><%- user.information %></td>
                </tr>
             <%
            } %>
          </tbody>
        </table>
      </div>
    </div>
    <div class="right floated five wide column">
        <%
        if (fortune) {
            let color;
            if (fortune.fortune.indexOf('吉') != -1) color = '#1fb752';
            else if (fortune.fortune.indexOf('凶') != -1) color = '#f25e65';
            else color = '#444';
        %>
        <h4 class="ui top attached block header">今日运势</h4>
        <div class="ui bottom attached segment">
            <div style="height: 15px; "></div>
            <div class="ui two column center aligned padded grid">
                <div class="one column row">
                    <div style="text-align: center; ">
                        <div style="color: <%= color %>; font-size: 49px;"><%- (user.sex == -1 ? '♀ ' : '♂ ') + fortune.fortune + (user.sex == 1 ? ' <span style="transform: scaleX(-1); display: inline-block; ">♂</span>' : ' ♀') %></div>
                    </div>
                </div>
                <div class="two column row">
                    <div class="column">
                        <div style="color: #1fb752; ">
                            <% if (fortune.good.length) { %>
                            <strong>宜：</strong><%= fortune.good[0].title %>
                            <br>
                            <span style="color: #888; font-size: 0.7em; "><%= fortune.good[0].detail %></span>
                            <div style="margin-top: 10px; "></div>
                            <strong>宜：</strong><%= fortune.good[1].title %>
                            <br>
                            <span style="color: #888; font-size: 0.7em; "><%= fortune.good[1].detail %></span>
                            <% } else { %>
                            <strong>诸事不宜<br>
                            </strong>
                            <% } %>
                        </div>
                    </div>
                    <div class="column">
                        <div style="color: #f25e65; ">
                            <% if (fortune.bad.length) { %>
                            <strong>忌：</strong><%= fortune.bad[0].title %>
                            <br>
                            <span style="color: #888; font-size: 0.7em; "><%= fortune.bad[0].detail %></span>
                            <div style="margin-top: 10px; "></div>
                            <strong>忌：</strong><%= fortune.bad[1].title %>
                            <br>
                            <span style="color: #888; font-size: 0.7em; "><%= fortune.bad[1].detail %></span>
                            <% } else { %>
                            <strong>万事皆宜<br>
                            </strong>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <% } %>
      <h4 class="ui top attached block header">信息栏</h4>
      <div class="ui bottom attached segment">
        <p><%- syzoj.config.announcement %></p>
      </div>
    </div>
  </div>
</div>
<% include footer %>
